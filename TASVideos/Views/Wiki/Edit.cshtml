@model WikiEditModel
@{
	ViewData["Title"] = $"Editing {Model.PageName}";
}

<form asp-controller="Wiki" asp-action="Edit" form-method="POST">
	<input type="hidden" asp-for="PageName" />
	<form-group class="col-lg-6">
		<row>
			<div class="form-check">
				<input type="checkbox" class="form-check-input" asp-for="MinorEdit" />
				<label asp-for="MinorEdit" class="form-check-label"></label>
			</div>
		</row>
		<row>
			<label asp-for="RevisionMessage" class="form-control-label"></label>
			<input type="text" asp-for="RevisionMessage" class="form-control" autocomplete="off" />
			<span asp-validation-for="RevisionMessage" class="text-danger"></span>
		</row>
	</form-group>
	<form-group>
		<textarea asp-for="Markup" class="form-control" rows="20"></textarea>
		<span asp-validation-for="Markup" class="text-danger"></span>
		@await Component.InvokeAsync(typeof(RenderWikiPage), new { url = "System/WikiEditHelp" })
	</form-group>
	<div class="text-center">
		<button type="button" class="btn btn-secondary" id="preview-button">Preview</button>
		<button type="submit" class="btn btn-primary">Save</button>
		<a href="/@Model.PageName" class="btn btn-secondary">Cancel</a>
	</div>
	<div class="text-center alert-info" role="alert">
		<label class="small alert-info">By pressing "Save/Edit" you agree to publish this content under the <a target="_blank" href="https://creativecommons.org/licenses/by/2.0/"> Creative Commons Attribution 2.0</a> license.</label>
	</div>
</form>

<partial name="_PreviewWindow" model="@((nameof(Model.Markup), $"/Wiki/{nameof(WikiController.GeneratePreview)}"))" />

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}
