@{
	Layout = "~/Views/Shared/_Layout.cshtml";
	WikiPage pageData = (WikiPage)ViewData["WikiPage"];
	bool canEdit = WikiHelper.UserCanEditWikiPage(pageData.PageName, User.Identity.Name, (IEnumerable<PermissionTo>)ViewData["UserPermissions"]);
}
<!-- Eventually we will show available translations here-->
@if (canEdit)
{
	<div class="text-right">
		<a class="btn btn-primary" asp-controller="Wiki" asp-action="Edit" asp-route-path="@pageData.PageName">Edit</a>
	</div>
	<hr />
}

@RenderBody()
<hr />
<small>
	@pageData.PageName last edited by @pageData.LastUpdateUserName on @pageData.LastUpdateTimeStamp
</small>
<br />
@if (canEdit)
{
	<a class="btn btn-primary btn-xs" asp-controller="Wiki" asp-action="Edit" asp-route-path="@pageData.PageName">Edit</a>
	<a class="btn btn-warning btn-xs" asp-controller="Wiki" asp-action="MovePage" asp-route-path="@pageData.PageName">Move</a>
	<a class="btn btn-danger btn-xs">Delete</a>
}
<a class="btn btn-info btn-xs" asp-controller="Wiki" asp-action="PageHistory" asp-route-path="@pageData.PageName">Page History</a>
<a class="btn btn-info btn-xs" asp-controller="Wiki" asp-action="Diff" asp-route-path="@pageData.PageName">Last diff</a>
<a class="btn btn-info btn-xs" asp-controller="Wiki" asp-action="Referrers" asp-route-path="@pageData.PageName">List referrers</a>
<a class="btn btn-info btn-xs" asp-controller="Wiki" asp-action="ViewSource" asp-route-path="@pageData.PageName">View Source</a>


@section Scripts {
	<!--TODO put a wiki page js file here-->
	@if (IsSectionDefined("PageTitle"))
	{
		@RenderSection("Scripts")
	}
}
