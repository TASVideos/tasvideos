@functions {
	string Active(string menuName)
	{
		string active = "active";
		if (menuName == "Home" && ViewContext.Controller() == "Home")
		{
			return active;
		}

		if (menuName == "Submissions" && ViewContext.Controller() == "Submission")
		{
			return active;
		}

		if (menuName == "Administration" &&
			(ViewContext.Controller() == "Roles"
				|| ViewContext.Controller() == "User"
				|| ViewContext.Controller() == "Permissions"))
		{
			return active;

		}

		if (menuName == (string)ViewData["ActiveTab"])
		{
			return active;
		}

		if (menuName == (string)TempData["ActiveTab"])
		{
			return active;
		}

		return "";
	}
}

<ul class="navbar-nav mr-auto">
	<li class="nav-item @(Active("Home"))">
		<a class="nav-link" asp-action="Index" asp-controller="Home">Home</a>
	</li>
	<li class="nav-item @(Active("Movies"))">
		<a class="nav-link" href="/Movies">Movies</a>
	</li>
	<li class="nav-item @Active("Game Resources")">
		<a class="nav-link" href="/GameResources">Game Resources</a>
	</li>
	<li class="nav-item @(Active("Articles"))">
		<a class="nav-link" href="/ArticleIndex">Articles</a>
	</li>
	<li class="nav-item @(Active("Emulators"))">
		<a class="nav-link" href="/EmulatorResources">Emulators</a>
	</li>
	<li class="nav-item @(Active("Submissions"))">
		<a class="nav-link" asp-controller="Submission" asp-action="Index">Submissions</a>
	</li>
	<li class="nav-item @(Active("News"))">
		<a class="nav-link" href="/Submissions">News</a>
	</li>
	@if (ViewData.UserHasAnyPermission(new[] { PermissionTo.ViewUsers, PermissionTo.EditUsers, PermissionTo.EditRoles }))
	{
		<li class="nav-item dropdown @(Active("Administration"))">
			<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Administration<span class="caret"></span></a>
			<div class="dropdown-menu">
				@if (ViewData.UserHasAnyPermission(new[] { PermissionTo.ViewUsers, PermissionTo.EditUsers }))
				{
					<a class="dropdown-item" asp-controller="User" asp-action="List">Users</a>
				}
				<a class="dropdown-item" asp-controller="Roles" asp-action="Index">Roles</a>
				<a class="dropdown-item" asp-controller="Permissions" asp-action="Index">Permissions</a>
			</div>
		</li>
	}
	<li class="nav-item dropdown @(Active("Wiki"))">
		<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Wiki<span class="caret"></span></a>
		<div class="dropdown-menu">
			<a class="dropdown-item" href="/RecentChanges">Recent Changes</a>
			<a class="dropdown-item" href="/WikiOrphans">Orphans</a>
			<a class="dropdown-item" href="/TODO">To Do</a>
			<a class="dropdown-item" href="/System">System Pages</a>
		</div>
	</li>
</ul>