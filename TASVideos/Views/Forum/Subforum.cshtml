@using TASVideos.Data.Entity.Forum
@model ForumModel
@{
	ViewData["Title"] = $"TASVideos Forum {Model.Name}";
}

@functions {
	string ToTitle(string title, ForumTopicType type)
	{
		switch (type)
		{
			default:
				return title;
			case ForumTopicType.Sticky:
				return "<b>Sticky: </b> " + title;
			case ForumTopicType.Announcement:
				return "<b>Announcement</b> " + title;
		}
	}
}
<partial Name="_ForumHeader" />
<a permission="EditForums" asp-action="EditForum" asp-route-id="@Model.Id" class="pull-right btn btn-primary btn-sm">Edit</a>
<a permission="CreateForumTopics" asp-action="CreateTopic" asp-route-forumId="@Model.Id" class="mr-2 pull-right btn btn-primary btn-sm"><span class="fa fa-plus"></span> New Topic</a>
<h4><a asp-action="Index">Forum</a> -> @Model.Name</h4>
<div>
	<small>@Html.Raw(Model.Description)</small>
</div>
<hr />
<partial name="~/Views/Table/_Pager.cshtml" model="Model.Topics" />

<table class="table table-striped table-bordered">
	<tr>
		<th></th>
		<th>Topics</th>
		<th>Replies</th>
		<th>Author</th>
		<td>Views</td>
		<td>Last Post</td>
	</tr>
	@foreach (var topic in Model.Topics)
	{
		<tr>
			<td>
				<span condition="@(topic.Type == ForumTopicType.Sticky)" class="fa fa-sticky-note"></span>
				<span condition="@(topic.Type == ForumTopicType.Announcement)" class="fa fa-bullhorn"></span>
			</td>
			<td><a asp-controller="Forum" asp-action="Topic" asp-route-id="@topic.Id">@Html.Raw(ToTitle(topic.Title, topic.Type))</a></td>
			<td>@(topic.PostCount - 1)</td>
			<td>@topic.CreateUserName</td>
			<td>@topic.Type</td>
			<td>@topic.LastPost</td>
		</tr>
	}
</table>

