@using TASVideos.Data.Entity.Forum
@model ForumModel
@{
	ViewData["Title"] = $"TASVideos Forum {Model.Name}";
}

@functions {
	string ToTitle(string title, ForumTopicType type)
	{
		switch (type)
		{
			default:
				return title;
			case ForumTopicType.Sticky:
				return "<b>Sticky: </b> " + title;
			case ForumTopicType.Announcement:
				return "<b>Announcement</b> " + title;
		}
	}
}

<h4>@Model.Name</h4>
<div>
	<a asp-controller="ForumTopic" asp-action="Create" asp-route-forumId="@Model.Id" class="pull-right btn btn-primary"><span class="fa fa-plus"></span> New Topic</a>
	<small>@Model.Description</small>
</div>
<hr />
@Html.Partial("~/Views/Table/_Pager.cshtml", Model.Topics)

<table class="table table-striped table-bordered">
	<tr>
		<th></th>
		<th>Topics</th>
		<th>Replies</th>
		<th>Author</th>
		<td>Views</td>
		<td>Last Post</td>
	</tr>
	@foreach (var topic in Model.Topics)
	{
		<tr>
			<td><span class="fa fa-plus"></span></td>
			<td><a asp-controller="ForumTopic" asp-action="Index" asp-route-id="@topic.Id">@Html.Raw(ToTitle(topic.Title, topic.Type))</a></td>
			<td>@(topic.PostCount - 1)</td>
			<td>@topic.CreateUserName</td>
			<td>@topic.Type</td>
			<td>TODO</td>
		</tr>
	}
</table>

