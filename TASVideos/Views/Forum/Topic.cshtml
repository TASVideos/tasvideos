@model ForumTopicModel
@{
	ViewData["Title"] = $"TASVideos Forum {Model.Title}";
}
<partial Name="_ForumHeader" />
<fullrow>
	<partial name="_TopicActionBar" model="Model" />
	<partial name="_TopicCrumbs" model="Model" />
	<a
		condition="ViewData.UserHas(PermissionTo.PostInLockedTopics) || (!Model.IsLocked && ViewData.UserHas(PermissionTo.CreateForumPosts))" 
		asp-action="CreatePost" 
		asp-route-topicId="@Model.Id" 
		class="btn btn-primary btn-sm pull-right">
		<span class="fa fa-plus"></span> Post
	</a>
</fullrow>

@if (Model.Poll != null)
{
	<hr />
	<partial name="_Poll" model="Model.Poll" />
}

<hr class="mt-1" />
<fullrow>
	<partial name="_Pager" model="Model.Posts" />
</fullrow>
@foreach (var post in Model.Posts.OrderBy(p => p.CreateTimestamp).ToList())
{
	<partial name="_TopicPost" model="post" />
}
<fullrow class="mt-2">
	<partial name="_Pager" model="Model.Posts" />
</fullrow>
