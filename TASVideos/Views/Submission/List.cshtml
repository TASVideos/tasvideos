@model SubmissionListViewModel
@{
	ViewData["Title"] = "Submissions";
}



@if (ViewData.UserHasPermission(PermissionTo.SubmitMovies))
{
	<div class="pull-right">
		<div class="mb-1">
			<a class="btn btn-primary" asp-action="Submit">Submit a Movie</a>
		</div>
		<div>
			<a asp-action="List" asp-route-user="@User.Identity.Name" class="btn btn-secondary">My Submissions</a>
		</div>
	</div>
}

@await Component.InvokeAsync(typeof(RenderWikiPage), new { url = "System/SubmissionHeader" })
<hr />
<form method="get">
	<input type="hidden" asp-for="User"/>
	<two-column-select available-list="AvailableStatuses" id-list="StatusFilter"/>
	<button type="submit" class="btn btn-secondary mt-1">Filter</button>
</form>
<hr />
<label class="pull-right">Total: @Model.Entries.Count()</label>
<table class="table table-striped table-bordered">
	<tr>
		<th>@Html.DisplayNameFor(m => m.Entries.First().Title)</th>
		<th>@Html.DisplayNameFor(m => m.Entries.First().Author)</th>
		<th>@Html.DisplayNameFor(m => m.Entries.First().Submitted)</th>
		<th>@Html.DisplayNameFor(m => m.Entries.First().Status)</th>
	</tr>
	@foreach (var item in Model.Entries)
	{
		<tr>
			<td><a href="/@(item.Id)S">@item.Title</a></td>
			<td>@item.Author</td>
			<td>@item.Submitted</td>
			<td>@item.Status.EnumDisplayName()</td>
		</tr>
	}
</table>