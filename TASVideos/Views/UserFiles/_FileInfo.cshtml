@model UserFileViewModel

@functions
{
	string FormatTime(TimeSpan timeSpan)
	{
		var format =
			timeSpan.TotalDays >= 1 ? @"d\:hh\:mm\:ss\.ff" :
			timeSpan.TotalHours >= 1 ? @"h\:mm\:ss\.ff" :
			@"mm\:ss\.ff";

		return timeSpan.ToString(format);
	}
}

<div class="card">
	<div class="card-header">
		<h4>User movie #@Model.Id</h4>
	</div>

	<div class="card-body">
		<h5 class="card-title">
			@Model.Title
		</h5>


		<div class="card-text">
			<p>@Model.FileName</p>
			<p>Uploaded @Model.Uploaded.ToString("G") by @Model.Author</p>

			@if (Model is UserMovieViewModel movie)
			{
				<p>In @FormatTime(movie.Length) (@movie.Frames frames), @movie.Rerecords rerecords</p>
			}

			<p>
				@Model.Views view@(Model.Views == 1 ? "" : "s"),
				@Model.Downloads download@(Model.Downloads == 1 ? "" : "s")
			</p>
		</div>

		<hr />

		<div class="card-text">
			<p>@Model.Description</p>
		</div>

		<hr />

		<div class="card-text">
			<a asp-action="Download" asp-route-id="@Model.Id">Download</a>
		</div>
	</div>
</div>
