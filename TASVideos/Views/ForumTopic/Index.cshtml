@model ForumTopicModel
@{
	ViewData["Title"] = $"TASVideos Forum {Model.Title}";
}

<h4>@Model.Title</h4>
<div>
	<a asp-controller="ForumPost" asp-action="Create" asp-route-topicId="@Model.Id" class="btn btn-primary"><span class="fa fa-plus"></span>Post</a>
</div>
<hr />
@Html.Partial("~/Views/Table/_Pager.cshtml", Model.Posts)

@foreach (var post in Model.Posts.OrderBy(p => p.CreateTimestamp))
{
	<row>
		<div class="col-5 col-md-3 pr-0">
			<div class="card text-right">
				<div class="card-body">
					<h5 class="card-title">@post.PosterName</h5>
					<div class="card-text p-0 m-0">
						<small>
							@string.Join(",", post.PosterRoles)
							(todo points)
						</small>
						<br />
						<img src="@post.PosterAvatar" />
						<br />
						<small>
							Joined: @post.PosterJoined<br/>
							Posts: @post.PosterPostCount<br/>
							Location: @post.PosterLocation
						</small>
					</div>
				</div>
			</div>
		</div>
		<div class="col-7 col-md-9  pl-0">
			<div class="card">
				<div class="card-header">
					<small>
						Posted: @post.CreateTimestamp
						<span condition="!string.IsNullOrWhiteSpace(post.Subject)">Post subject: @post.Subject</span>
					</small>
				</div>
				<div class="card-body">
					@Html.Raw(post.RenderedText)
				</div>
				<div class="card-footer">
					<small style="font-style: italic">@Html.Raw(post.RenderedSignature)</small>
					<br />
					<a class="btn btn-info btn-sm" asp-controller="User" asp-action="Profile" asp-route-id="@post.PosterId">Profile</a>
					TODO: PM Btn
					<div class="pull-right">
					@foreach(var award in post.Awards)
					{
						<img src="/awards/@($"{award.ShortName}_{award.Year.ToString().PadLeft(2, '0')}.png")" title="@award.Description" alt="@award.Description" />
					}
					</div>
				</div>
			</div>
		</div>
	</row>
}
